<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- 用户信息卡片 -->
  <view class="user-section slide-up">
    <view class="user-card glass">
      <view class="user-info flex-between">
        <view class="user-avatar-wrapper" bindtap="showUserModal">
          <image class="user-avatar" src="{{userInfo.avatarUrl || '/assets/icons/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="avatar-edit">
            <text class="avatar-edit-icon">✏️</text>
          </view>
        </view>
        <view class="user-details">
          <text class="user-name text-xl font-semibold">{{userInfo.nickName || '未登录'}}</text>
          <text class="user-desc text-sm text-gray mt-sm">已记账 {{totalBills}} 笔</text>
        </view>
        <view class="user-arrow">
          <text class="icon-arrow">›</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 统计数据 -->
  <view class="stats-section slide-up anim-delay-1">
    <view class="stats-card glass">
      <view class="stat-item flex-column">
        <text class="stat-value text-2xl font-bold text-blue">{{stats.totalIncome}}</text>
        <text class="stat-label text-sm text-gray mt-sm">总收入</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item flex-column">
        <text class="stat-value text-2xl font-bold text-red">{{stats.totalExpense}}</text>
        <text class="stat-label text-sm text-gray mt-sm">总支出</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item flex-column">
        <text class="stat-value text-2xl font-bold gradient-text">{{stats.totalBalance}}</text>
        <text class="stat-label text-sm text-gray mt-sm">结余</text>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section slide-up anim-delay-2">
    <view class="menu-card">
      <view class="menu-item" bindtap="manageCategories">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #0071e320, #2997ff20)">
            <text class="menu-icon-text" style="color: #0071e3">📂</text>
          </view>
          <text class="menu-label text-base">分类管理</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="manageAccounts">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #34c75920, #30d15820)">
            <text class="menu-icon-text" style="color: #34c759">💳</text>
          </view>
          <text class="menu-label text-base">账户管理</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="setBudget">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #ff950020, #ff6b0020)">
            <text class="menu-icon-text" style="color: #ff9500">📊</text>
          </view>
          <text class="menu-label text-base">预算设置</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="exportData">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #5856d620, #5ac8fa20)">
            <text class="menu-icon-text" style="color: #5856d6">📤</text>
          </view>
          <text class="menu-label text-base">数据导出</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 更多设置 -->
  <view class="menu-section slide-up anim-delay-3">
    <view class="menu-card">
      <view class="menu-item" bindtap="toggleTheme">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #1d1d1f20, #63636620)">
            <text class="menu-icon-text" style="color: #1d1d1f">🌙</text>
          </view>
          <text class="menu-label text-base">深色模式</text>
        </view>
        <view class="menu-right">
          <switch checked="{{isDarkMode}}" color="#0071e3" bindchange="onThemeChange" />
        </view>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="showAbout">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #0071e320, #2997ff20)">
            <text class="menu-icon-text" style="color: #0071e3">ℹ️</text>
          </view>
          <text class="menu-label text-base">关于我们</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="showFeedback">
        <view class="menu-left">
          <view class="menu-icon" style="background: linear-gradient(135deg, #ff3b3020, #ff453a20)">
            <text class="menu-icon-text" style="color: #ff3b30">💬</text>
          </view>
          <text class="menu-label text-base">意见反馈</text>
        </view>
        <view class="menu-right">
          <text class="icon-arrow">›</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 版本信息 -->
  <view class="version-section slide-up anim-delay-4">
    <text class="text-sm text-gray">版本 1.0.0</text>
  </view>
</view>
